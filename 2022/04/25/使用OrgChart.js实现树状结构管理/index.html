<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>使用OrgChart.js实现树状结构管理 | Emarginata's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.1.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用OrgChart.js实现树状结构管理</h1><a id="logo" href="/.">Emarginata's Blog</a><p class="description">苍山若望，负雪恒行。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">使用OrgChart.js实现树状结构管理</h1><div class="post-meta">2022-04-25<span> | </span><span class="category"><a href="/categories/%E6%96%87%E6%A1%A3/">文档</a><a href="/categories/%E6%96%87%E6%A1%A3/Demo/">Demo</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 763</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 3</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><h5 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h5><p>地学数据库中，每条数据都有关联的学科、主题、子主题关键词。因此拥有管理员权限的用户需要一个页面，用来管理关键词（增删改查）。<br>关键词的层级关系：学科关键词→主题关键词→子主题关键词。</p>
<h5 id="安装OrgChart-js"><a href="#安装OrgChart-js" class="headerlink" title="安装OrgChart.js"></a>安装OrgChart.js</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @balkangraph/orgchart.js --save</span><br></pre></td></tr></table></figure>
<h5 id="在React组件中引入"><a href="#在React组件中引入" class="headerlink" title="在React组件中引入"></a>在React组件中引入</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import OrgChart from &#x27;@balkangraph/orgchart.js&#x27;</span><br></pre></td></tr></table></figure>
<h5 id="修改模板样式"><a href="#修改模板样式" class="headerlink" title="修改模板样式"></a>修改模板样式</h5><p>此部分代码来自OrgChart.js官网示例，作用是修改名称为’ana’主题模板的部分样式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">OrgChart.templates.ana.plus = &#x27;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;15&quot; fill=&quot;#ffffff&quot; stroke=&quot;#aeaeae&quot; stroke-width=&quot;1&quot;&gt;&lt;/circle&gt;&#x27;</span><br><span class="line">    + &#x27;&lt;text text-anchor=&quot;middle&quot; style=&quot;font-size: 18px;cursor:pointer;&quot; fill=&quot;#757575&quot; x=&quot;15&quot; y=&quot;22&quot;&gt;&#123;collapsed-children-count&#125;&lt;/text&gt;&#x27;;</span><br><span class="line"></span><br><span class="line">OrgChart.templates.itTemplate = Object.assign(&#123;&#125;, OrgChart.templates.ana);</span><br><span class="line">OrgChart.templates.itTemplate.nodeMenuButton = &quot;&quot;;</span><br><span class="line">OrgChart.templates.itTemplate.nodeCircleMenuButton = &#123;</span><br><span class="line">    radius: 18,</span><br><span class="line">    x: 250,</span><br><span class="line">    y: 60,</span><br><span class="line">    color: &#x27;#fff&#x27;,</span><br><span class="line">    stroke: &#x27;#aeaeae&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">OrgChart.templates.invisibleGroup.padding = [20, 0, 0, 0];</span><br></pre></td></tr></table></figure>
<h5 id="获取关键词并整理格式"><a href="#获取关键词并整理格式" class="headerlink" title="获取关键词并整理格式"></a>获取关键词并整理格式</h5><p>服务端获取的关键词数据中，第一级数据是学科关键词，为了方便管理，在学科关键词前添加根关键词，串联起第一级的所有学科关键词。<br>循环遍历，为每一个关键词添加<code>pid</code>属性，修改每一个关键词的<code>id</code>为<code>关键词类名+关键词原id</code><br>例：<br>原数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>整理后的数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">###### 从服务端获取的数据格式：</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">###### 整理后的数据格式：</span><br></pre></td></tr></table></figure>
<p>[<br>    {<br>        “name”: “关键词”,<br>        “name_en”: “Keywords”,<br>        “title”: “关键词”,<br>        “id”: “root”,<br>        “tags”: [<br>            “menu-without-delete”<br>        ]<br>    },<br>    {<br>        “id”: “discipline5”,<br>        “name”: “GIS”,<br>        “status”: 0,<br>        “name_en”: “GIS”,<br>        “themes”: null,<br>        “pid”: “root”<br>    },<br>    {<br>        “id”: “discipline6”,<br>        “name”: “大气”,<br>        “status”: 0,<br>        “name_en”: “daqi”,<br>        “themes”: [<br>            {<br>                “id”: “themes5”,<br>                “name”: “大气主题1”,<br>                “status”: 0,<br>                “name_en”: “daqitheme1”,<br>                “discipline_id”: 6,<br>                “userKeyword”: [<br>                    {<br>                        “id”: “userKeyword44”,<br>                        “name”: “大气用户”,<br>                        “status”: 0,<br>                        “theme_id”: 5,<br>                        “name_en”: “大气用户”,<br>                        “from”: “user2”,<br>                        “pid”: “themes5”,<br>                        “tags”: [<br>                            “menu-without-add”<br>                        ]<br>                    }<br>                ],<br>                “pid”: “discipline6”<br>            },<br>            {<br>                “id”: “themes6”,<br>                “name”: “大气主题2”,<br>                “status”: 0,<br>                “name_en”: “daqitheme2”,<br>                “discipline_id”: 6,<br>                “userKeyword”: null,<br>                “pid”: “discipline6”<br>            }<br>        ],<br>        “pid”: “root”<br>    },<br>    {<br>        “id”: “discipline8”,<br>        “name”: “大气科学”,<br>        “status”: 0,<br>        “name_en”: “Atmospheric Science”,<br>        “themes”: [<br>            {<br>                “id”: “themes101”,<br>                “name”: “大气物理学”,<br>                “status”: 0,<br>                “name_en”: “Atmospheric physics”,<br>                “discipline_id”: 8,<br>                “userKeyword”: null,<br>                “pid”: “discipline8”<br>            },<br>            {<br>                “id”: “themes109”,<br>                “name”: “大气科学其他学科”,<br>                “status”: 0,<br>                “name_en”: “Other disciplines of atmospheric science”,<br>                “discipline_id”: 8,<br>                “userKeyword”: null,<br>                “pid”: “discipline8”<br>            }<br>        ],<br>        “pid”: “root”<br>    },<br>    {<br>        “id”: “discipline9”,<br>        “name”: “固体地球物理学”,<br>        “status”: 0,<br>        “name_en”: “solid state geophysics”,<br>        “themes”: [<br>            {<br>                “id”: “themes111”,<br>                “name”: “地球重力学”,<br>                “status”: 0,<br>                “name_en”: “geogravimetry”,<br>                “discipline_id”: 9,<br>                “userKeyword”: null,<br>                “pid”: “discipline9”<br>            },<br>            {<br>                “id”: “themes117”,<br>                “name”: “地电学”,<br>                “status”: 0,<br>                “name_en”: “To electrical”,<br>                “discipline_id”: 9,<br>                “userKeyword”: [<br>                    {<br>                        “id”: “userKeyword47”,<br>                        “name”: “航磁”,<br>                        “status”: 0,<br>                        “theme_id”: 117,<br>                        “name_en”: “Hangci”,<br>                        “from”: “geobayes”,<br>                        “pid”: “themes117”,<br>                        “tags”: [<br>                            “menu-without-add”<br>                        ]<br>                    }<br>                ],<br>                “pid”: “discipline9”<br>            },<br>            {<br>                “id”: “themes118”,<br>                “name”: “地磁学”,<br>                “status”: 0,<br>                “name_en”: “Terrestrial magnetism”,<br>                “discipline_id”: 9,<br>                “userKeyword”: [<br>                    {<br>                        “id”: “userKeyword45”,<br>                        “name”: “大兴安岭”,<br>                        “status”: 0,<br>                        “theme_id”: 118,<br>                        “name_en”: “Da Xing An Lingt”,<br>                        “from”: “geobayes”,<br>                        “pid”: “themes118”,<br>                        “tags”: [<br>                            “menu-without-add”<br>                        ]<br>                    },<br>                    {<br>                        “id”: “userKeyword46”,<br>                        “name”: “大兴安岭”,<br>                        “status”: 0,<br>                        “theme_id”: 118,<br>                        “name_en”: “DXAL”,<br>                        “from”: “geobayes”,<br>                        “pid”: “themes118”,<br>                        “tags”: [<br>                            “menu-without-add”<br>                        ]<br>                    }<br>                ],<br>                “pid”: “discipline9”<br>            }<br>        ],<br>        “pid”: “root”<br>    },<br>    {<br>        “id”: “discipline10”,<br>        “name”: “空间物理学”,<br>        “status”: 0,<br>        “name_en”: “space physics”,<br>        “themes”: [<br>            {<br>                “id”: “themes125”,<br>                “name”: “电离层物理学”,<br>                “status”: 0,<br>                “name_en”: “Ionospheric physics”,<br>                “discipline_id”: 10,<br>                “userKeyword”: null,<br>                “pid”: “discipline10”<br>            },<br>            {<br>                “id”: “themes127”,<br>                “name”: “磁层物理学”,<br>                “status”: 0,<br>                “name_en”: “Magnetospheric physics”,<br>                “discipline_id”: 10,<br>                “userKeyword”: null,<br>                “pid”: “discipline10”<br>            },<br>            {<br>                “id”: “themes128”,<br>                “name”: “空间物理探测”,<br>                “status”: 0,<br>                “name_en”: “Space physical exploration”,<br>                “discipline_id”: 10,<br>                “userKeyword”: null,<br>                “pid”: “discipline10”<br>            }<br>        ],<br>        “pid”: “root”<br>    }<br>]</p>
<pre><code>
</code></pre>
</div><div class="tags"><a href="/tags/React"><i class="fa fa-tag">React</i></a><a href="/tags/OrgChart.js"><i class="fa fa-tag">OrgChart.js</i></a><a href="/tags/可视化"><i class="fa fa-tag">可视化</i></a></div><div class="post-nav"><a class="pre" href="/2022/04/26/CSS%E6%A0%B7%E5%BC%8F%E5%BC%95%E5%85%A5%E7%9A%84%E6%96%B9%E5%BC%8F/">CSS样式引入的方式</a><a class="next" href="/2022/04/25/link%E5%92%8C@import/">link和@import</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Demo/">Demo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%87%E6%A1%A3/">文档</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%87%E6%A1%A3/Demo/">Demo</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 15px;">CSS3</a> <a href="/tags/HTML5/" style="font-size: 15px;">HTML5</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 15px;">优化</a> <a href="/tags/OrgChart-js/" style="font-size: 15px;">OrgChart.js</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 15px;">可视化</a> <a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 15px;">浏览器</a> <a href="/tags/vtk-js/" style="font-size: 15px;">vtk.js</a> <a href="/tags/echarts/" style="font-size: 15px;">echarts</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95/">前端优化方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/JavaScript%E4%B8%AD%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE/">JavaScript中的原型链</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/JavaScript%E4%B8%AD%E7%9A%84%E7%B1%BB/">JavaScript中的类</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/ES6%E6%96%B0%E5%B1%9E%E6%80%A7/">ES6新属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9/">补充知识点</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/%E8%99%9A%E6%8B%9FDOM%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B/">虚拟DOM的创建过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/02/JSX%E6%9C%AC%E8%B4%A8/">JSX本质</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/01/%E6%95%B0%E6%8D%AE%E4%B8%8E%E6%A8%A1%E5%9E%8B%E5%8F%AF%E8%A7%86%E5%8C%96Demo/">数据与模型可视化Demo</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/30/git%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/">git相关命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/27/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%92%8CV8%E5%BC%95%E6%93%8E/">浏览器工作原理和V8引擎</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/." rel="nofollow">Emarginata's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>