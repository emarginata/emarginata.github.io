<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>前端优化方法 | Emarginata's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.1.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">前端优化方法</h1><a id="logo" href="/.">Emarginata's Blog</a><p class="description">苍山若望，负雪恒行。</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">前端优化方法</h1><div class="post-meta">2022-05-03<span> | </span><span class="category"><a href="/categories/%E6%96%87%E6%A1%A3/">文档</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.4k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 4</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><h2 id="加载时间优化"><a href="#加载时间优化" class="headerlink" title="加载时间优化"></a>加载时间优化</h2><h3 id="减少HTTP请求"><a href="#减少HTTP请求" class="headerlink" title="减少HTTP请求"></a>减少HTTP请求</h3><p>一个完整的http请求需要经历DNS查找、TCP握手、浏览器发送http请求、服务器处理请求并发回响应，浏览器接收响应等过程。<br><code>真正下载数据的时间/完整请求的时间</code>，文件越小，这个比例越小；文件越大，这个比例越大。因此建议将多个小文件合并为一个大文件，从而减少http请求次数。</p>
<h3 id="使用HTTP2"><a href="#使用HTTP2" class="headerlink" title="使用HTTP2"></a>使用HTTP2</h3><p>HTTP2相比HTTP1.1有如下几个优点：</p>
<ul>
<li>解析速度快<br>服务器解析HTTP1.1的请求时，必须不断地读入字节，直到遇到分隔符CRLF为止。<br>而解析HTTP2的请求时不用这么麻烦，因为HTTP2是基于帧的协议，每个帧都有表示帧长度的字段。（？）</li>
<li>多路复用<br>HTTP1.1如果要同时发起多个请求，就得建立多个TCP连接，因为一个TCP连接同时只能处理一个HTTP1.1的请求。<br>在HTTP2上，多个请求可以共用一个TCP连接，这成为多路复用。同一个请求和响应用一个流来表示，并且有唯一的流ID来标识。多个请求和响应在TCP连接中可以乱序发送，到达目的地后再通过流ID重新组建。</li>
<li>首部压缩<br>两个或者多个请求中，请求头可能有很多数据是重复的。如果可以把相同的首部存储起来，仅发送它们不同的部分，就可以节省不同的流量，加快请求的时间。<br>HTTP2在客户端和服务器端使用“首部表”来跟踪和存储之前发生的键值对，对于相同的数据，不再通过每次请求和响应发送。</li>
<li>优先级<br>HTTP2可以对比较紧急的请求设置一个较高的优先级，服务器在收到这样的请求后，可以优先处理。</li>
<li>流量控制<br>由于一个TCP连接流量带宽（根据客户端到服务器的网络带宽而定）是固定的，当有多个请求并发时，一个请求占的流量多，另一个请求占的流量就会少。流量控制可以对不同流的流量进行精确控制。</li>
<li>服务器推送<br>HTTP2服务器可以对一个客户端请求发送多个响应。换句话说，除了对最初请求的响应外，服务器还可以额外向客户端推送资源，而无需客户端明确地请求。<br>例如当浏览器请求一个网站时，除了返回HTML页面外，服务器还可以根据HTML页面中资源的URL，来提前推送资源。</li>
</ul>
<h3 id="使用服务端渲染"><a href="#使用服务端渲染" class="headerlink" title="使用服务端渲染"></a>使用服务端渲染</h3><p>客户端渲染：获取HTML文件，根据需要下载JavaScript文件，运行文件，生成DOM，再渲染。<br>服务端渲染：服务端返回HTML文件，客户端只需解析HTML。<br>优点：首屏渲染快，SEO好。<br>缺点：配置麻烦，增加了服务器的计算压力。<br>以Vue SSR为例：</p>
<h5 id="客户端渲染过程"><a href="#客户端渲染过程" class="headerlink" title="客户端渲染过程"></a>客户端渲染过程</h5><ol>
<li>访问客户端渲染的网站。</li>
<li>服务器返回了一个包含引入资源语句和<code>&lt;div id=&#39;app&#39;&gt;&lt;/div&gt;</code>的HTML文件。</li>
<li>客户端通过HTTP向服务器请求资源，当必要的资源都加载完毕后，执行<code>new Vue()</code>开始实例化并渲染页面。<h5 id="服务端渲染过程"><a href="#服务端渲染过程" class="headerlink" title="服务端渲染过程"></a>服务端渲染过程</h5></li>
<li>访问服务端渲染的网站。</li>
<li>服务器查看当前路由组件需要哪些资源文件，然后将这些文件内容填充到HTML文件里，最后返回这个HTML页面。</li>
<li>当客户端接收到这个HTML页面时，马上就可以渲染页面。与此同时，页面也会加载资源，当必要的资源都加载完毕后，开始执行<code>new Vue()</code>开始实例化并接管页面。</li>
</ol>
<p>从上述两个过程可以看出，区别在于第二步。客户端渲染的网站会直接返回HTML文件，而服务端渲染的网站会渲染完页面再返回这个HTML文件。<br>服务器渲染拥有更快的内容到达时间(time-to-content)。</p>
<h3 id="静态资源使用CDN"><a href="#静态资源使用CDN" class="headerlink" title="静态资源使用CDN"></a>静态资源使用CDN</h3><p>内容分发网络(CDN)是一组分布在不同地理位置的Web服务器。<br>当服务器离用户越远时，延迟越高。CDN就是为了解决这一问题，在多个位置部署服务器，让用户离服务器更近，从而缩短请求时间。</p>
<h3 id="将CSS放在文件头部，JavaScript放在文件底部"><a href="#将CSS放在文件头部，JavaScript放在文件底部" class="headerlink" title="将CSS放在文件头部，JavaScript放在文件底部"></a>将CSS放在文件头部，JavaScript放在文件底部</h3><ul>
<li>CSS执行会阻塞渲染，阻止JS执行</li>
<li>JS加载和执行会阻塞HTML解析，阻止CSSOM构建<br>如果这些CSS、JS标签放在HEAD标签里，并且需要加载和解析很久的话，那么页面就空白了。所以JS文件要放在底部（不阻止DOM解析，但会阻塞渲染），等HTML解析完了再加载JS文件，尽早向用户呈现页面的内容。<br>那为什么CSS文件还要放在头部呢？<br>因为先加载HTML再加载CSS，会让用户第一眼看到的页面是没有样式的、“丑陋”的，为了避免这种情况，就要将CSS文件放在头部了。<br>另外，JS文件也不是不可以放在头部，只要给script标签加上<code>defer</code>属性就可以了。</li>
</ul>
<h3 id="使用字体图标IconFont代替图片图标"><a href="#使用字体图标IconFont代替图片图标" class="headerlink" title="使用字体图标IconFont代替图片图标"></a>使用字体图标IconFont代替图片图标</h3><h2 id="运行时间优化"><a href="#运行时间优化" class="headerlink" title="运行时间优化"></a>运行时间优化</h2><hr>
<p>参考资料：<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6892994632968306702">前端性能优化 24 条建议（2020）</a></p>
</div><div class="tags"><a href="/tags/HTML5"><i class="fa fa-tag">HTML5</i></a><a href="/tags/CSS"><i class="fa fa-tag">CSS</i></a><a href="/tags/JavaScript"><i class="fa fa-tag">JavaScript</i></a><a href="/tags/优化"><i class="fa fa-tag">优化</i></a></div><div class="post-nav"><a class="pre" href="/2022/05/04/script%E6%A0%87%E7%AD%BE%E4%B8%AD%E7%9A%84defer%E5%92%8Casyn%E5%B1%9E%E6%80%A7/">script标签中的defer和asyn属性</a><a class="next" href="/2022/05/03/JavaScript%E4%B8%AD%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE/">JavaScript中的原型链</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Demo/">Demo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%87%E6%A1%A3/">文档</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%87%E6%A1%A3/Demo/">Demo</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/CSS3/" style="font-size: 15px;">CSS3</a> <a href="/tags/HTML5/" style="font-size: 15px;">HTML5</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/OrgChart-js/" style="font-size: 15px;">OrgChart.js</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 15px;">可视化</a> <a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 15px;">浏览器</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 15px;">优化</a> <a href="/tags/vtk-js/" style="font-size: 15px;">vtk.js</a> <a href="/tags/echarts/" style="font-size: 15px;">echarts</a> <a href="/tags/git/" style="font-size: 15px;">git</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/05/05/%E4%BB%8E%E8%BE%93%E5%85%A5URL%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%8E%B0%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/">从输入URL到页面展现发生了什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/04/script%E6%A0%87%E7%AD%BE%E4%B8%AD%E7%9A%84defer%E5%92%8Casyn%E5%B1%9E%E6%80%A7/">script标签中的defer和asyn属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95/">前端优化方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/JavaScript%E4%B8%AD%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE/">JavaScript中的原型链</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/JavaScript%E4%B8%AD%E7%9A%84%E7%B1%BB/">JavaScript中的类</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/ES6%E6%96%B0%E5%B1%9E%E6%80%A7/">ES6新属性</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9/">补充知识点</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/03/%E8%99%9A%E6%8B%9FDOM%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B/">虚拟DOM的创建过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/02/JSX%E6%9C%AC%E8%B4%A8/">JSX本质</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/01/%E6%95%B0%E6%8D%AE%E4%B8%8E%E6%A8%A1%E5%9E%8B%E5%8F%AF%E8%A7%86%E5%8C%96Demo/">数据与模型可视化Demo</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/." rel="nofollow">Emarginata's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>